name: .NET

on: [push, pull_request]
jobs:
  build:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: 'true'
    - name: setup-msbuild
      uses: microsoft/setup-msbuild@v1
    - name: Setup NuGet.exe for use with actions
      uses: NuGet/setup-nuget@v1.0.5
    - name: Restore dependencies
      run: msbuild -t:restore DedicatedServerWrapper.sln
    - name: Build FlatBuffers
      run: msbuild /p:Configuration=Release Meds.Shared/Meds.Shared.csproj /t:FlatcCompile
    - name: Build manager
      run: msbuild /p:Configuration=Release Meds.Watchdog/Meds.Watchdog.csproj
